{{! search }}
<div class='container-fluid'>

  {{! info top row }}
  <div id='info' class='row'>
    <div class='col-md-12'>
      <div class='pull-left'><strong class='text-success'>Search: {{q}}</strong></div>
      <div class='pull-right'><strong class='text-info'>Results: {parse meta}</strong></div>
    </div>
  </div>

  <div class='row'>

    {{! table }}
    <div id='table' class='col-md-9'>
      <table class='table table-hover'>
        <thead>
          <th>Title</th>
          <th>Organization</th>
          <th>Funding Mechanism / Activtiy</th>
          <th>Admin/Funding IC</th>
          <th>PIs</th>
          <th>Support Year</th>
          <th>Award Date</th>
          <th>Total Cost</th>
        </thead>
        <tbody>
          {{#each model.grants as |m|}}
            <tr>
              <td>{{m.projectTitle}}</td>
              <td>{{m.orgName}}</td>
              <td>{{m.fundingMechanism}} / {{m.activity}}</td>
              <td>{{m.administeringIc}} / {{m.icName}}</td>
              <td>
                {{#each m.piNames as |pi|}}
                  {{pi}}
                {{/each}}
              </td>
              <td>{{m.supportYear}}</td>
              <td>{{m.awardNoticeDate}}</td>
              <td>{{m.totalCost}}</td>
            </tr>
          {{/each}}
        </tbody>
      </table>
    </div>

    {{! filter }}
    <div id='filter' class='col-md-3'>
      <div class='row text-center'><strong>Filters</strong></div>
      
      <div class='row'>
        <div class='col-md-12'>
          <h5>Funding Mechanism</h5>
          {{#power-select
            allowClear=true
            dropdownClass="slide-fade"
            options=model.fundingMechanisms
            placeholder='Select funding mechanisms'
            selected=(find-by model.fundingMechanisms 'id' fundingMechanism)
            onchange=(action 'filterSelection' 'fundingMechanism')
            as |mech|
          }}
            <strong>{{mech.id}} <span class='badge'>{{mech.value}}</span></strong>
          {{/power-select}}
        </div>
      </div>

      <div class='row'>
        <div class='col-md-12'>
          <h5>Admin IC</h5>
          {{#power-select
            allowClear=true
            dropdownClass="slide-fade"
            options=model.administeringIcs
            placeholder='Select funding mechanisms'
            selected=(find-by model.administeringIcs 'id' administeringIc)
            onchange=(action 'filterSelection' 'administeringIc')
            as |ic|
          }}
            <strong>{{ic.id}} <span class='badge'>{{ic.value}}</span></strong>
          {{/power-select}}
        </div>
      </div>

    </div>

  </div>
</div>
